<!DOCTYPE html>
<html>
<head>
    <title>测试页面</title>
</head>
<body>
    <h1>测试 API</h1>
    <textarea id="input" rows="5" cols="50">测试任务</textarea><br>
    <button onclick="testAPI()">测试 API</button>
    <button onclick="document.getElementById('input').value=''">清空</button>
    <div id="result"></div>

    <script>
    async function testAPI() {
        console.log('开始测试...');
        const input = document.getElementById('input').value;
        const resultDiv = document.getElementById('result');
        
        resultDiv.innerHTML = '处理中...';
        
        try {
            const response = await fetch('http://localhost:8000/api/tasks/ai-process', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({ input: input })
            });
            
            const data = await response.json();
            console.log('响应:', data);
            resultDiv.innerHTML = '<pre>' + JSON.stringify(data, null, 2) + '</pre>';
        } catch (error) {
            console.error('错误:', error);
            resultDiv.innerHTML = '错误: ' + error;
        }
    }
    
    // 测试基本 JavaScript
    console.log('JavaScript 已加载');
    </script>
</body>
</html>